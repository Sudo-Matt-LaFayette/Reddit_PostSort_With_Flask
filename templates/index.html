{% extends "base.html" %}

{% block title %}Flask Weather Station{% endblock %}

{% block content %}
<main class="weather-app">
    <section class="map-panel" aria-label="Interactive weather map">
        <div id="map" class="map-canvas" role="presentation"></div>
        <div class="map-status" id="map-status" hidden></div>
        <div class="map-hint">
            <i class="fa-solid fa-location-crosshairs" aria-hidden="true"></i>
            <span>Click the map to update location</span>
        </div>
    </section>

    <aside class="info-panel" id="info-panel">
        <div class="clock-block">
            <div class="clock-date" data-role="clock-date"></div>
            <div class="clock-time" data-role="clock-time"></div>
            <div class="sun-times">
                <div class="sun-item">
                    <i class="fa-solid fa-sun" aria-hidden="true"></i>
                    <span data-role="sunrise">{{ weather.sun.sunrise }}</span>
                </div>
                <div class="sun-item">
                    <i class="fa-solid fa-moon" aria-hidden="true"></i>
                    <span data-role="sunset">{{ weather.sun.sunset }}</span>
                </div>
            </div>
        </div>

        <div class="location-block">
            <i class="fa-solid fa-location-dot" aria-hidden="true"></i>
            <span data-role="location-name">{{ weather.location.name }}</span>
        </div>

        <section class="current-weather" aria-label="Current weather">
            <div class="weather-icon">
                <i class="fa-solid {{ weather.current.icon }}" data-role="current-icon" aria-hidden="true"></i>
            </div>
            <div class="temp-block">
                <span class="temp-value" data-role="current-temp">{{ weather.current.temp }}</span>
                <span class="temp-unit">&deg;{{ weather.current.temp_unit }}</span>
            </div>
            <div class="weather-stats">
                <div class="stat-item">
                    <i class="fa-solid fa-droplet" aria-hidden="true"></i>
                    <span data-role="current-precip">
                        {% if weather.current.precip_probability is not none %}{{ weather.current.precip_probability }}%{% else %}n/a{% endif %}
                    </span>
                </div>
                <div class="stat-item">
                    <i class="fa-solid fa-cloud" aria-hidden="true"></i>
                    <span data-role="current-cloud">
                        {% if weather.current.cloud_cover is not none %}{{ weather.current.cloud_cover }}%{% else %}n/a{% endif %}
                    </span>
                </div>
                <div class="stat-item">
                    <i class="fa-solid fa-wind" aria-hidden="true"></i>
                    <span data-role="current-wind">
                        {% if weather.current.wind_speed is not none %}{{ weather.current.wind_speed }} {{ weather.current.wind_unit }}{% else %}n/a{% endif %}
                    </span>
                </div>
                <div class="stat-item">
                    <i class="fa-solid fa-water" aria-hidden="true"></i>
                    <span data-role="current-humidity">
                        {% if weather.current.humidity is not none %}{{ weather.current.humidity }}%{% else %}n/a{% endif %}
                    </span>
                </div>
            </div>
            <div class="condition" data-role="current-condition">{{ weather.current.condition }}</div>
        </section>

        <section class="forecast-section" aria-label="7 day forecast">
            <div class="section-title">7 Day Outlook</div>
            <div class="forecast-grid" data-role="daily-forecast">
                {% for day in weather.daily %}
                <div class="forecast-card">
                    <div class="forecast-day">{{ day.day }}</div>
                    <div class="forecast-temp">
                        <span class="high">{{ day.high }}&deg;</span>
                        <span class="low">{{ day.low }}&deg;</span>
                    </div>
                    <div class="forecast-condition">
                        <i class="fa-solid {{ day.icon }}" aria-hidden="true"></i>
                        <span>{{ day.condition }}</span>
                    </div>
                    <div class="forecast-sun">
                        <span><i class="fa-solid fa-sun" aria-hidden="true"></i> {{ day.sunrise }}</span>
                        <span><i class="fa-solid fa-moon" aria-hidden="true"></i> {{ day.sunset }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <div class="controls" aria-label="Controls">
            <button class="control-button" type="button" data-action="refresh" aria-label="Refresh weather">
                <i class="fa-solid fa-rotate" aria-hidden="true"></i>
            </button>
            <button class="control-button" type="button" data-action="recenter" aria-label="Recenter map">
                <i class="fa-solid fa-location-crosshairs" aria-hidden="true"></i>
            </button>
            <button class="control-button" type="button" data-action="settings" aria-label="Settings">
                <i class="fa-solid fa-gear" aria-hidden="true"></i>
            </button>
        </div>
    </aside>
</main>
{% endblock %}
